var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,false)},onDeviceReady:function(){app.receivedEvent("deviceready")},receivedEvent:function(b){console.log("Received Event: "+b);app.bbuistart()},checkInstance:function(){if(webworksreadyFired){return}webworksreadyFired=true},themeSetup:function(){var b;darkScreenColor="black";if(darkColoring){b={controlsDark:true,listsDark:true}}else{b={controlsDark:false,listsDark:false,coloredTitleBar:false}}return b},bbuistart:function(){this.checkInstance();var b=this.themeSetup();b.onscreenready=function(f,e){console.log("载入页面: "+e);if(darkColoring){var a=f.querySelector("[data-bb-type=screen]");if(a){a.style["background-color"]=darkScreenColor}}if(e==="settings"){loadSettings(f,e)}else{if(e==="about"){}else{app.addMenu(f)}}};b.ondomready=function(a,e,f){if(e==="menu"){app.readList(a)}};bb.init(b);if(darkColoring){document.body.style["background-color"]=darkScreenColor;document.body.style.color="#E6E6E6"}bb.pushScreen("menu.html","menu")},readList:function(c){var k=c.getElementById("list");var j=[],h;for(var i=0;i<article.list.length;i++){h=document.createElement("div");h.setAttribute("data-bb-type","item");h.setAttribute("data-bb-title",article.list[i].title);h.setAttribute("url",article.list[i].url);h.innerHTML=article.list[i].by;h.onclick=function(){app.gotoList()};j.push(h)}k.refresh(j)},gotoList:function(){var c=document.getElementById("list").selected;console.log(c);var d=c.getAttribute("url");console.log(d);bb.pushScreen(d,"view")},addMenu:function(k){var j=document.createElement("div");j.setAttribute("data-bb-type","menu");var f=document.createElement("div");f.setAttribute("data-bb-type","menu-item");f.setAttribute("data-bb-img","img/ic_info.png");f.innerHTML="关于";f.onclick=function(){bb.pushScreen("about.html","about")};j.appendChild(f);var h=document.createElement("div");h.setAttribute("data-bb-type","menu-item");h.setAttribute("data-bb-img","img/ic_browser.png");h.innerHTML="评分";h.onclick=function(){Invoke.blackberryWorld.app(appid)};j.appendChild(h);var i=document.createElement("div");i.setAttribute("data-bb-type","menu-item");i.setAttribute("data-bb-img","img/ic_settings.png");i.innerHTML="设置";i.onclick=function(){bb.pushScreen("settings.html","settings")};j.appendChild(i);gg(k,"screen").appendChild(j)}};function g(b){return gg(document,b)}function gg(d,c){return d.getElementById(c)}function qq(d,c){return d.querySelector("["+c+"]")}function q(b){return qq(document,b)}function loadSettings(i,e){var f=i.getElementById("themeToggle");var h=localStorage.getItem("theme");if("true"===h){usingDarkTheme=true;f.setAttribute("data-bb-checked","true")}else{usingDarkTheme=false;f.setAttribute("data-bb-checked","false")}bb.refresh()}function saveSettings(b){if(b.checked){console.log(">>使用黑色主题.");localStorage.setItem("theme","true")}else{console.log(">>使用亮色主题.");localStorage.setItem("theme","false")}}function refreshTheme(){var b=localStorage.getItem("theme");if(b===usingDarkTheme){return}else{window.location.reload()}};