var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,false)},onDeviceReady:function(){app.receivedEvent("deviceready")},receivedEvent:function(a){console.log("Received Event: "+a);app.bbuistart()},checkInstance:function(){if(webworksreadyFired){return}webworksreadyFired=true},themeSetup:function(){var a;darkScreenColor="black";if(darkColoring){a={controlsDark:true,listsDark:true}}else{a={controlsDark:false,listsDark:false,coloredTitleBar:false}}return a},bbuistart:function(){this.checkInstance();var a=this.themeSetup();a.onscreenready=function(c,d){console.log("载入页面: "+d);if(darkColoring){var b=c.querySelector("[data-bb-type=screen]");if(b){b.style["background-color"]=darkScreenColor}}if(d==="settings"){loadSettings(c,d)}else{app.addMenu(c)}};a.ondomready=function(b,d,c){if(d==="menu"){app.readList(b)}};bb.init(a);if(darkColoring){document.body.style["background-color"]=darkScreenColor;document.body.style.color="#E6E6E6"}bb.pushScreen("menu.html","menu")},readList:function(e){var f=e.getElementById("list");var a=[],d;for(var b=0;b<article.list.length;b++){d=document.createElement("div");d.setAttribute("data-bb-type","item");d.setAttribute("data-bb-title",article.list[b].title);d.setAttribute("url",article.list[b].url);d.innerHTML=article.list[b].by;d.onclick=function(){app.gotoList()};a.push(d)}f.refresh(a)},gotoList:function(){var b=document.getElementById("list").selected;console.log(b);var a=b.getAttribute("url");console.log(a);bb.pushScreen(a,"view")},addMenu:function(e){var a=document.createElement("div");a.setAttribute("data-bb-type","menu");var d=document.createElement("div");d.setAttribute("data-bb-type","menu-item");d.setAttribute("data-bb-img","img/ic_info.png");d.innerHTML="About";d.onclick=function(){Toast.regular("about",3000)};a.appendChild(d);var c=document.createElement("div");c.setAttribute("data-bb-type","menu-item");c.setAttribute("data-bb-img","img/ic_browser.png");c.innerHTML="Rate";c.onclick=function(){Toast.regular("rate",3000)};a.appendChild(c);var b=document.createElement("div");b.setAttribute("data-bb-type","menu-item");b.setAttribute("data-bb-img","img/ic_settings.png");b.innerHTML="Settings";b.onclick=function(){bb.pushScreen("settings.html","settings")};a.appendChild(b);gg(e,"screen").appendChild(a)}};function g(a){return gg(document,a)}function gg(a,b){return a.getElementById(b)}function qq(a,b){return a.querySelector("["+b+"]")}function q(a){return qq(document,a)}function loadSettings(a,d){var c=a.getElementById("themeToggle");var b=localStorage.getItem("theme");if("true"===b){usingDarkTheme=true;c.setAttribute("data-bb-checked","true")}else{usingDarkTheme=false;c.setAttribute("data-bb-checked","false")}bb.refresh()}function saveSettings(a){if(a.checked){console.log(">>使用黑色主题.");localStorage.setItem("theme","true")}else{console.log(">>使用亮色主题.");localStorage.setItem("theme","false")}}function refreshTheme(){var a=localStorage.getItem("theme");if(a===usingDarkTheme){return}else{window.location.reload()}};